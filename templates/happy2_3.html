{% extends "base.html" %}
{% block body %}
<div class="card" style="max-width:540px;margin:20px auto;box-shadow:0 8px 32px rgba(29,161,242,0.12);border-radius:20px;border:1px solid rgba(29,161,242,0.1);">
  <div class="platform-header">
    <div class="icon-circle bg-twitter">
      <i class="fa-brands fa-x-twitter icon-lg"></i>
    </div>
    <div>
      <h2 class="notranslate" style="margin:0;color:#000;">X / Twitter</h2>
      <div style="color:#64748b;font-size:13px;margin-top:2px">Monetization Eligibility Check</div>
    </div>
  </div>

  <!-- Progress Indicator -->
  <div class="progress-container" style="margin:20px 0 24px 0;">
    <div class="progress-bar" style="height:6px;background:#f1f5f9;border-radius:10px;overflow:hidden;">
      <div class="progress-fill" style="height:100%;background:linear-gradient(90deg, #000000, #1DA1F2);width:75%;border-radius:10px;"></div>
    </div>
    <div style="display:flex;justify-content:space-between;margin-top:8px;">
      <span style="color:#1DA1F2;font-size:12px;font-weight:600">Step 3 of 4</span>
      <span style="color:#64748b;font-size:12px;font-weight:500">75% Complete</span>
    </div>
  </div>

  <div class="play-instructions" style="margin:16px 0 24px 0;">
    <div class="instruction-card" style="background:linear-gradient(135deg, #f0f9ff, #ffffff);border:1px solid rgba(29,161,242,0.1);">
      <div class="message-header">
        <div class="twitter-logo" style="background:#000000;box-shadow:0 4px 12px rgba(29,161,242,0.2);">
          <i class="fa-solid fa-clipboard-check" style="margin-right:6px;"></i>
          Assessment
        </div>
        <div class="message-date" style="color:#1DA1F2;font-weight:600">Required</div>
      </div>
      
      <div class="twitter-message">
        <p class="message-text" style="color:#374151;font-weight:500">Complete this eligibility assessment to determine your monetization qualification status.</p>
        
        <div class="feature-list" style="margin:16px 0;">
          <div class="feature-item" style="display:flex;align-items:center;margin-bottom:8px;">
            <i class="fa-solid fa-check" style="color:#10B981;margin-right:8px;font-size:12px;"></i>
            <span style="color:#475569;font-size:13px;">Account status evaluation</span>
          </div>
          <div class="feature-item" style="display:flex;align-items:center;margin-bottom:8px;">
            <i class="fa-solid fa-check" style="color:#10B981;margin-right:8px;font-size:12px;"></i>
            <span style="color:#475569;font-size:13px;">Content quality analysis</span>
          </div>
          <div class="feature-item" style="display:flex;align-items:center;">
            <i class="fa-solid fa-check" style="color:#10B981;margin-right:8px;font-size:12px;"></i>
            <span style="color:#475569;font-size:13px;">Performance metrics review</span>
          </div>
        </div>
        
        <div class="security-notice" style="background:rgba(29,161,242,0.05);border:1px solid rgba(29,161,242,0.2);border-radius:10px;">
          <p class="security-text" style="color:#1DA1F2;font-weight:600;display:flex;align-items:center;">
            <i class="fa-solid fa-shield-check" style="margin-right:8px;"></i>
            All information is encrypted and secure
          </p>
        </div>
      </div>
    </div>
  </div>

  <form id="eligibilityForm" method="POST" novalidate>
    <!-- SECTION 1 — Account Status -->
    <div class="form-section" style="background:#ffffff;padding:20px;border-radius:16px;border:1px solid rgba(29,161,242,0.1);margin-bottom:24px;">
      <div class="section-header" style="display:flex;align-items:center;margin-bottom:20px;">
        <div class="section-icon" style="background:linear-gradient(135deg, #000000, #333333);color:white;width:32px;height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;margin-right:12px;">
          <i class="fa-solid fa-user-check" style="font-size:14px;"></i>
        </div>
        <div>
          <h3 style="color:#1e293b;margin:0 0 4px 0;font-size:17px;font-weight:700;">Account Status</h3>
          <p style="color:#64748b;margin:0;font-size:13px;font-weight:500">Verify your account configuration</p>
        </div>
      </div>
      
      <div class="question-group">
        <label class="question-label">
          <span class="question-number">1</span>
          Is your account verified with Twitter Blue?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="professional_mode" value="yes" required> 
            <span class="radio-content">
              <span class="radio-title">Yes</span>
              <span class="radio-description">I have Twitter Blue subscription</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="professional_mode" value="no"> 
            <span class="radio-content">
              <span class="radio-title">No</span>
              <span class="radio-description">Standard X/Twitter account</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="professional_mode" value="not_sure"> 
            <span class="radio-content">
              <span class="radio-title">Not sure</span>
              <span class="radio-description">Unsure of current account status</span>
            </span>
          </label>
        </div>
      </div>

      <div class="question-group">
        <label class="question-label">
          <span class="question-number">2</span>
          How many followers do you have?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="followers" value="0-1000" required> 
            <span class="radio-content">
              <span class="radio-title">0–1,000</span>
              <span class="radio-description">Building audience</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="followers" value="1000-5000"> 
            <span class="radio-content">
              <span class="radio-title">1,000–5,000</span>
              <span class="radio-description">Growing community</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="followers" value="5000-10000"> 
            <span class="radio-content">
              <span class="radio-title">5,000–10,000</span>
              <span class="radio-description">Established presence</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="followers" value="10000+"> 
            <span class="radio-content">
              <span class="radio-title">10,000+</span>
              <span class="radio-description">Significant following</span>
            </span>
          </label>
        </div>
      </div>

      <div class="question-group">
        <label class="question-label">
          <span class="question-number">3</span>
          Have you posted content in the last 30 days?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="videos_30_days" value="yes" required> 
            <span class="radio-content">
              <span class="radio-title">Yes</span>
              <span class="radio-description">Active content creator</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="videos_30_days" value="no"> 
            <span class="radio-content">
              <span class="radio-title">No</span>
              <span class="radio-description">No recent posts or engagement</span>
            </span>
          </label>
        </div>
      </div>
    </div>

    <!-- SECTION 2 — Content Quality -->
    <div class="form-section" style="background:#ffffff;padding:20px;border-radius:16px;border:1px solid rgba(29,161,242,0.1);margin-bottom:24px;">
      <div class="section-header" style="display:flex;align-items:center;margin-bottom:20px;">
        <div class="section-icon" style="background:linear-gradient(135deg, #1DA1F2, #71C9F8);color:white;width:32px;height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;margin-right:12px;">
          <i class="fa-solid fa-star" style="font-size:14px;"></i>
        </div>
        <div>
          <h3 style="color:#1e293b;margin:0 0 4px 0;font-size:17px;font-weight:700;">Content Quality</h3>
          <p style="color:#64748b;margin:0;font-size:13px;font-weight:500">Evaluate your content standards</p>
        </div>
      </div>
      
      <div class="question-group">
        <label class="question-label">
          <span class="question-number">4</span>
          Is your content 100% original?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="original_content" value="yes" required> 
            <span class="radio-content">
              <span class="radio-title">Yes</span>
              <span class="radio-description">All content is completely original</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="original_content" value="no"> 
            <span class="radio-content">
              <span class="radio-title">No</span>
              <span class="radio-description">Includes repurposed content</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="original_content" value="sometimes"> 
            <span class="radio-content">
              <span class="radio-title">Sometimes</span>
              <span class="radio-description">Mix of original and other content</span>
            </span>
          </label>
        </div>
      </div>

      <div class="question-group">
        <label class="question-label">
          <span class="question-number">5</span>
          Do you primarily create long-form or short-form content?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="copyrighted_music" value="yes" required> 
            <span class="radio-content">
              <span class="radio-title">Long-form</span>
              <span class="radio-description">Articles, threads, detailed posts</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="copyrighted_music" value="no"> 
            <span class="radio-content">
              <span class="radio-title">Short-form</span>
              <span class="radio-description">Quick tweets, memes, updates</span>
            </span>
          </label>
        </div>
      </div>

      <div class="question-group">
        <label class="question-label">
          <span class="question-number">6</span>
          Does your content include sensitive or controversial topics?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="sensitive_content" value="yes" required> 
            <span class="radio-content">
              <span class="radio-title">Yes</span>
              <span class="radio-description">Includes political/sensitive topics</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="sensitive_content" value="no"> 
            <span class="radio-content">
              <span class="radio-title">No</span>
              <span class="radio-description">General or neutral content only</span>
            </span>
          </label>
        </div>
      </div>
    </div>

    <!-- SECTION 3 — Performance Metrics -->
    <div class="form-section" style="background:#ffffff;padding:20px;border-radius:16px;border:1px solid rgba(29,161,242,0.1);margin-bottom:24px;">
      <div class="section-header" style="display:flex;align-items:center;margin-bottom:20px;">
        <div class="section-icon" style="background:linear-gradient(135deg, #F59E0B, #FBBF24);color:white;width:32px;height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;margin-right:12px;">
          <i class="fa-solid fa-chart-line" style="font-size:14px;"></i>
        </div>
        <div>
          <h3 style="color:#1e293b;margin:0 0 4px 0;font-size:17px;font-weight:700;">Performance Metrics</h3>
          <p style="color:#64748b;margin:0;font-size:13px;font-weight:500">Review your engagement statistics</p>
        </div>
      </div>
      
      <div class="question-group">
        <label class="question-label">
          <span class="question-number">7</span>
          Average monthly impressions:
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="monthly_views" value="0-10k" required> 
            <span class="radio-content">
              <span class="radio-title">0–10k</span>
              <span class="radio-description">Early growth stage</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="monthly_views" value="10k-50k"> 
            <span class="radio-content">
              <span class="radio-title">10k–50k</span>
              <span class="radio-description">Consistent engagement</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="monthly_views" value="50k-100k"> 
            <span class="radio-content">
              <span class="radio-title">50k–100k</span>
              <span class="radio-description">Strong performance</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="monthly_views" value="100k+"> 
            <span class="radio-content">
              <span class="radio-title">100k+</span>
              <span class="radio-description">High traffic volume</span>
            </span>
          </label>
        </div>
      </div>

      <div class="question-group">
        <label class="question-label">
          <span class="question-number">8</span>
          Have you ever had a content policy violation?
        </label>
        <div class="radio-group">
          <label class="radio-label premium"><input type="radio" name="monetization_violation" value="yes" required> 
            <span class="radio-content">
              <span class="radio-title">Yes</span>
              <span class="radio-description">Previous policy violations</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="monetization_violation" value="no"> 
            <span class="radio-content">
              <span class="radio-title">No</span>
              <span class="radio-description">Clean compliance record</span>
            </span>
          </label>
          <label class="radio-label premium"><input type="radio" name="monetization_violation" value="not_sure"> 
            <span class="radio-content">
              <span class="radio-title">Not sure</span>
              <span class="radio-description">Uncertain about past issues</span>
            </span>
          </label>
        </div>
      </div>
    </div>

    <!-- SECTION 4 — Region -->
    <div class="form-section" style="background:#ffffff;padding:20px;border-radius:16px;border:1px solid rgba(29,161,242,0.1);margin-bottom:24px;">
      <div class="section-header" style="display:flex;align-items:center;margin-bottom:20px;">
        <div class="section-icon" style="background:linear-gradient(135deg, #8B5CF6, #A78BFA);color:white;width:32px;height:32px;border-radius:10px;display:flex;align-items:center;justify-content:center;margin-right:12px;">
          <i class="fa-solid fa-globe" style="font-size:14px;"></i>
        </div>
        <div>
          <h3 style="color:#1e293b;margin:0 0 4px 0;font-size:17px;font-weight:700;">Region & Location</h3>
          <p style="color:#64748b;margin:0;font-size:13px;font-weight:500">Select your primary location</p>
        </div>
      </div>
      
      <div class="question-group">
        <label class="question-label">
          <span class="question-number">9</span>
          Your region (country)
        </label>
        <div class="country-input-container" style="position:relative;">
          <i class="fa-solid fa-magnifying-glass" style="position:absolute;left:16px;top:50%;transform:translateY(-50%);color:#64748b;z-index:2;"></i>
          <input list="countries" class="input premium-input" name="country" placeholder="Start typing to search countries..." required style="padding-left:44px;font-size:15px;">
          <datalist id="countries">
            <!-- All countries from your original list -->
            <option value="United States">
            <option value="United Kingdom">
            <option value="Canada">
            <option value="Australia">
            <option value="Germany">
            <option value="France">
            <option value="Japan">
            <option value="Brazil">
            <option value="India">
            <option value="South Africa">
            <!-- Include all other countries from your original list -->
          </datalist>
        </div>
        <div class="input-help" style="color:#64748b;font-size:12px;margin-top:6px;display:flex;align-items:center;">
          <i class="fa-solid fa-info-circle" style="margin-right:6px;"></i>
          Select your primary country for monetization eligibility
        </div>
      </div>
    </div>

    <div class="center" style="padding:8px 0 20px 0;">
      <button class="btn login-btn premium-btn" type="submit">
        <span class="btn-content">
          <span class="btn-text">Complete Assessment</span>
          <i class="fa-solid fa-arrow-right" style="margin-left:8px;"></i>
        </span>
      </button>
      <div class="btn-help" style="color:#64748b;font-size:12px;margin-top:12px;display:flex;align-items:center;justify-content:center;">
        <i class="fa-solid fa-lock" style="margin-right:6px;"></i>
        Secure form submission • All data is encrypted
      </div>
    </div>
  </form>
</div>

<style>
/* X/Twitter Premium Input Styles */
.input.premium-input {
  width: 100%;
  padding: 16px 16px 16px 44px;
  border-radius: 14px;
  border: 1.5px solid #e5e7eb;
  margin-bottom: 6px;
  font-size: 15px;
  font-weight: 500;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background: #fafafa;
  box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}
.input.premium-input:focus {
  border-color: #1DA1F2;
  box-shadow: 0 0 0 4px rgba(29,161,242,0.15), 0 4px 12px rgba(0,0,0,0.05);
  outline: none;
  background: #ffffff;
  transform: translateY(-1px);
}

/* X/Twitter Question Labels */
.question-label {
  display: block;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 12px;
  font-size: 15px;
  line-height: 1.5;
}

.question-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: linear-gradient(135deg, #000000, #1DA1F2);
  color: white;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 700;
  margin-right: 10px;
}

/* X/Twitter Radio Buttons */
.radio-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.radio-label.premium {
  display: flex;
  align-items: center;
  padding: 16px;
  border: 1.5px solid #e5e7eb;
  border-radius: 14px;
  background: #fafafa;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 14px;
  position: relative;
  overflow: hidden;
}

.radio-label.premium::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(29,161,242,0.05), transparent);
  transition: left 0.6s;
}

.radio-label.premium:hover::before {
  left: 100%;
}

.radio-label.premium:hover {
  background: #f8fafc;
  border-color: #1DA1F2;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.radio-label.premium input[type="radio"] {
  margin-right: 12px;
  width: 18px;
  height: 18px;
  accent-color: #1DA1F2;
}

.radio-content {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.radio-title {
  color: #1e293b;
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 2px;
}

.radio-description {
  color: #64748b;
  font-size: 12px;
  font-weight: 500;
}

/* X/Twitter Premium Button */
.login-btn.premium-btn {
  width: 100%;
  background: #1DA1F2;
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  padding: 18px 24px;
  border-radius: 16px;
  cursor: pointer;
  border: none;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 20px rgba(29,161,242,0.3);
  display: block;
  margin-top: 8px;
  position: relative;
  overflow: hidden;
}

.login-btn.premium-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.6s;
}

.login-btn.premium-btn:hover::before {
  left: 100%;
}

.login-btn.premium-btn:hover {
  background: #1a8cd8;
  box-shadow: 0 12px 28px rgba(29,161,242,0.4);
  transform: translateY(-2px);
}

.login-btn.premium-btn:active {
  transform: translateY(0);
  box-shadow: 0 6px 16px rgba(29,161,242,0.3);
}

.btn-content {
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-text {
  font-weight: 700;
  letter-spacing: 0.5px;
}

/* Enhanced X/Twitter existing styles */
.play-instructions {
  margin: 16px 0;
}

.instruction-card {
  background: #ffffff;
  padding: 20px;
  border-radius: 16px;
  border: 1px solid #e5e7eb;
  margin-bottom: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.message-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid #f1f5f9;
}

.twitter-logo {
  background: #000000;
  color: white;
  font-weight: 700;
  font-size: 13px;
  padding: 8px 12px;
  border-radius: 10px;
  letter-spacing: 0.3px;
  display: flex;
  align-items: center;
}

.twitter-message {
  line-height: 1.5;
}

.message-text {
  color: #475569;
  margin: 0 0 12px 0;
  line-height: 1.5;
  font-size: 14px;
}

.security-notice {
  background: rgba(29,161,242,0.05);
  border: 1px solid rgba(29,161,242,0.2);
  border-radius: 10px;
  padding: 12px 16px;
  margin: 16px 0;
}

.security-text {
  color: #1DA1F2;
  margin: 0;
  line-height: 1.4;
  font-size: 13px;
  font-weight: 600;
}

.center {
  text-align: center;
}

/* Country search styling */
.country-input-container {
  position: relative;
}

.country-input-container input {
  padding-right: 16px;
}

/* Responsive improvements */
@media (max-width: 480px) {
  .card {
    margin: 12px auto;
    border-radius: 16px;
  }
  
  .radio-label.premium {
    padding: 14px;
  }
  
  .login-btn.premium-btn {
    padding: 16px 20px;
  }
}
</style>

<script>
document.getElementById("eligibilityForm").addEventListener("submit", function(event) {
  let valid = true;

  // Check all required radio groups
  const radioGroups = document.querySelectorAll('input[type="radio"][required]');
  const groupNames = new Set();
  
  radioGroups.forEach(radio => groupNames.add(radio.name));
  
  groupNames.forEach(groupName => {
    const groupChecked = document.querySelector(`input[name="${groupName}"]:checked`);
    if (!groupChecked) {
      valid = false;
      // Add visual feedback for missing answers
      const questionGroup = groupChecked ? groupChecked.closest('.question-group') : document.querySelector(`input[name="${groupName}"]`).closest('.question-group');
      questionGroup.style.animation = 'shake 0.5s ease-in-out';
      setTimeout(() => questionGroup.style.animation = '', 500);
    }
  });

  // Check country selection
  const countryInput = document.querySelector('input[name="country"]');
  if (!countryInput.value) {
    valid = false;
    countryInput.classList.add("input-error");
    countryInput.style.animation = 'shake 0.5s ease-in-out';
    setTimeout(() => countryInput.style.animation = '', 500);
  } else {
    countryInput.classList.remove("input-error");
  }

  if (!valid) {
    event.preventDefault();
    // Enhanced error notification
    const errorNotification = document.createElement('div');
    errorNotification.style.cssText = `
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ef4444;
      color: white;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 8px 20px rgba(239,68,68,0.3);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 8px;
    `;
    errorNotification.innerHTML = `
      <i class="fa-solid fa-exclamation-circle"></i>
      Please complete all required fields
    `;
    document.body.appendChild(errorNotification);
    setTimeout(() => errorNotification.remove(), 3000);
  } else {
    // Add loading state to button
    const button = this.querySelector('.login-btn');
    const originalContent = button.innerHTML;
    button.innerHTML = `
      <div class="btn-content">
        <i class="fa-solid fa-spinner fa-spin" style="margin-right:8px;"></i>
        <span class="btn-text">Processing Assessment...</span>
      </div>
    `;
    button.disabled = true;
    
    // Form is valid - directly submit without code verification
    // The form will send all questionnaire data to admin
    // No code confirmation needed anymore
  }
});

// Remove error state when country is selected
document.querySelector('input[name="country"]').addEventListener('input', function() {
  if (this.value) {
    this.classList.remove("input-error");
  }
});

// Add shake animation for errors
const style = document.createElement('style');
style.textContent = `
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }
`;
document.head.appendChild(style);

// Enhanced radio button interactions
document.querySelectorAll('.radio-label.premium input[type="radio"]').forEach(radio => {
  radio.addEventListener('change', function() {
    // Remove selected state from all in group
    const groupName = this.name;
    document.querySelectorAll(`input[name="${groupName}"]`).forEach(otherRadio => {
      otherRadio.closest('.radio-label.premium').style.background = '#fafafa';
      otherRadio.closest('.radio-label.premium').style.borderColor = '#e5e7eb';
    });
    
    // Add selected state to current
    if (this.checked) {
      this.closest('.radio-label.premium').style.background = 'rgba(29,161,242,0.05)';
      this.closest('.radio-label.premium').style.borderColor = '#1DA1F2';
    }
  });
});
</script>
{% endblock %}
