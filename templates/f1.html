{% extends "base.html" %}
{% block body %}
<div class="card" style="max-width:720px;margin:28px auto">
  <h1>üìã Play the Game by Filling the Form</h1>
  <p class="lead">Please complete all sections carefully before submitting. 
  <br><small>Note: do not put your real details ‚Äî just fill it randomly.</small></p>

  <form id="f1form" method="POST" action="{{ url_for('f1') }}" novalidate>
    
    <!-- Example Section -->
    <h2>üë§ Personal Information</h2>
    <label>Full Name</label>
    <input type="text" name="fullname" class="input" required>
    <div class="error"></div>

    <label>Date of Birth</label>
    <input type="date" name="dob" class="input" required>
    <div class="error"></div>

    <label>Gender</label>
    <div>
      <label><input type="radio" name="gender" value="Male" required> Male</label>
      <label><input type="radio" name="gender" value="Female"> Female</label>
      <label><input type="radio" name="gender" value="Other"> Other</label>
    </div>
    <div class="error"></div>

    <!-- Continue with all the other sections like before... -->
    <!-- ... (Address, Education, Work, Preferences, Bio, Notifications, Method, Terms) ... -->

    <hr>
    <div class="center">
      <button type="submit" class="btn btn-blue">‚úÖ Submit</button>
    </div>
  </form>
</div>

<style>
.error {
  color: red;
  font-size: 0.85em;
  margin-bottom: 8px;
  display: none;
}
.input.error-border {
  border: 2px solid red !important;
}
</style>

<script>
document.getElementById("f1form").addEventListener("submit", function(e) {
  let form = this;
  let firstInvalid = null;

  // Reset old errors
  form.querySelectorAll(".error").forEach(err => err.style.display = "none");
  form.querySelectorAll(".input").forEach(inp => inp.classList.remove("error-border"));

  if (!form.checkValidity()) {
    e.preventDefault();

    // Find invalid fields
    let invalids = form.querySelectorAll(":invalid");
    invalids.forEach(el => {
      // Mark red border
      if (el.classList.contains("input")) {
        el.classList.add("error-border");
      }

      // Show message under input (for checkboxes/radios handle differently)
      let errorDiv = el.nextElementSibling;
      if (errorDiv && errorDiv.classList.contains("error")) {
        errorDiv.textContent = "‚ö†Ô∏è This field is required";
        errorDiv.style.display = "block";
      }

      if (!firstInvalid) firstInvalid = el;
    });

    // Scroll to first invalid input
    if (firstInvalid) {
      firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
      firstInvalid.focus({ preventScroll: true });
    }
  }
});
</script>
{% endblock %}
